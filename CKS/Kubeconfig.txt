- Chúng ta có thể sử dụng curl để access vào cluster. 
VD: curl https://172.16.1.10:6443/api/v1/pods \
    --key admin.key
    --cert admin.crt
    --cacert ca.crt
- Hoặc có thể sử dụng kubectl tool:
VD: kubectl get pods
    --server 172.16.1.10:6443
    --client-key admin.key
    --client-certificate admin.crt
    --certificate-authority ca.crt

=> Việc đính kém cert rất dài dòng và mất thời gian. Từ đó chúng ta có file kubeConfig in folder $HOME/.kube/config
- Defaul kubectl tool sẽ tìm kiếm một tệp có tên config trong thư mục mặc định khi khởi tạo cluster $HOME/.kube/config nên sẽ không cần specify chính xác file path config
- File config có 3 sections:
    + Cluster: Các môi trường khác nhau
    + User: Các user có quyền access vào các môi trường trên với certificate
    + Context: Quyết định user nào có thể access vào cluster nào (Nó có dạng admin@kubernetes)

Ex: Nội dung của 1 file config:
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1EWXhPVEUxTkRrME1sb1hEVE15TURZeE5qRTFORGswTWxvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBUFUzClYrR3orNzYyOVVDNVJ2ZzRxYzMrNnZXSGtBNFlPY2JsanFFREpKU1lRYWxoZmw0UWxkNktVbm5IZWxWTmc2Tm0KQks1VkI5MkMyaDN6dWxzcGhxc0pGSW1sNWMya2doaHFIRVhmSkhzbW5nd3U0WXZ6K3YzTDE1Qk90N3VwYXYyeAp4S0RGOU5SQUNENFgvM0drQ1h2ckw4Vk15d0lXWmUzWld2K051eFhLcW1UaVYyeHgybktJb1JSK3NuMUd6emEwCkV4dFI0Y3o1a1NkM2Fkd01mbzQ4U3JYTzd1NWUyWEs1bHc1b3lLdUQ3WXFJb2pKaWViSmlDNUZQU3d3YnZ4cHYKYjh3SmNlb2RXQ1kxRldua0M0UEx4a3YvMSt3MzY4YkNKQkZ0WEJEMWVIdnkwRU5wVGVZbHNoQ3JCV3plaTVyTApaNk5QSmVvelk0NjM0SWsrUXM4Q0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZHMzUyTCtBQzFvbSt3Sk14OFl2eTRJK1M1bWhNQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBRkFYelZ0Rk5uREh1QXZMQ1ljTQpBcHlRNkcvenQ1Y3JpV0F2R1pFVXN4cWF1ZGVBSDBxTmJBSHJoS0NnRVVnRTFuRVBNT3k1dEhxUGFreGMxZ0tJCk5UL2hmaFJsUmNuMDNPeHByNWNlMjQyRWFCaEtXT2pKT1lmZTFnVGtyL1pSVy9oWUhHQnNjaUVnOEZBM3cwNGwKajVLODlaMVRKd2Q3TG9BcTFiWEs3SVlxMGlHV1RLZ0Y0WGg1MWc5VVRSNTRQRkhybElrY3R4SkFNNng4NGdhUApCQklkbHEweTd5N0VUZzR0TVdTYVVZa1M1UjEzaUMxekJEREFYQW1uNnVLZDhRSW82TlJFYlRrbFNkRjR2cGlMCkMvWm1meXQ2VTJmaTFKY0hDVUFBWFRDSDRsb0owY1NlcXFIOTlEY09ZMGxEYlFSbWtOQncvUndRVGsxVEh5bCsKZnhVPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://172.16.1.10:6443
  name: kubernetes
contexts:
- context:
    cluster: kubernetes
    namespace: default
    user: kubernetes-admin
  name: kubernetes-admin@kubernetes
current-context: kubernetes-admin@kubernetes
kind: Config
preferences: {}
users:
- name: kubernetes-admin
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJVENDQWdtZ0F3SUJBZ0lJTnd1T1Mza3R2VXd3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TWpBMk1Ua3hOVFE1TkRKYUZ3MHlNekEyTVRreE5UUTVORE5hTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXFrUE5PU1dIWmd1M1FJei8KRGtOTXQwZ0lLODR6T0dOZ0ZFS1BnSG4renNpT3lhdzlxbjJQVVgxbnZUMmluN0xxSmNNMzZYSStOYTltb21qWgpGalBTWmExTGJhS3dXUjIyYzJuYjNRa0M0YmtidWRSOTByOUdOOUJEM0UyVjZRekhybmNSdWpTUUc2NG1Zay9hClN1ZEJKOW5hY21pOUthSTc4Y2lzUGdaSjBJemZWNEJMSXBFZ0dsOEUzN0FYRkRLa0JHdGZhZTl1a2JYRnFuMXIKd3lwV2RhVTIxZ1Z6N0xrRGQxWnJyZ3pBQ0hjZDBCVGR2WC9vdGNjUWQ4RjhUVElnYzR0K0RINUtYS01pQkg0SgpHYTIrVlNYeWFCUXEra0p1Y3R3RlVKZDZUOXByRFJSM3dSWFBXWDJEbGRFeURZOGJ0UzZJVTRRZmtIbW8zYW5xCnpHYi85UUlEQVFBQm8xWXdWREFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JSdCtkaS9nQXRhSnZzQ1RNZkdMOHVDUGt1WgpvVEFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBcVpERi9SUlZ3a1hyWTJQY0UzMWVNVjZ0M1dnM2djSTRrclNPCmZMY0R6VWV3NWk3OWRPUGRLNGZpWVZ1cHZGSncyMlM4NkhxaXR3dy9jOW5RbldVVlU5VlR0NjM1QzFsd3g5bk4KUjlNYVlaQ1B2SFNhZWc5eTQrM3BjUnhuNkhKNCtYanhWRTNMRVBtenJmNlovTWNYVStTOVQvN1JWcWRaUkdtYgpZV0JadDJsZFVOSjdkSGRYSzZiSytObGFpd01lZUNUU3RJZEIzSkhtc1A1YnZpT0FDeFhtWXRyZXE4QVpSby9VCjF2dWM4MVprU1BBWEdYbk4ydnVTVmdrbVc4WDdWbjgzUWg3anBjamE1VUs5aXUxY08yOTkvekRRYm9HNlU2MGcKOTlaYW8rRXVQUjdLUXJ4aElJVHFqZlZQTG9YOUhUM0RXemRiamZwdVd6bENVV0cvTWc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcFFJQkFBS0NBUUVBcWtQTk9TV0haZ3UzUUl6L0RrTk10MGdJSzg0ek9HTmdGRUtQZ0huK3pzaU95YXc5CnFuMlBVWDFudlQyaW43THFKY00zNlhJK05hOW1vbWpaRmpQU1phMUxiYUt3V1IyMmMybmIzUWtDNGJrYnVkUjkKMHI5R045QkQzRTJWNlF6SHJuY1J1alNRRzY0bVlrL2FTdWRCSjluYWNtaTlLYUk3OGNpc1BnWkowSXpmVjRCTApJcEVnR2w4RTM3QVhGREtrQkd0ZmFlOXVrYlhGcW4xcnd5cFdkYVUyMWdWejdMa0RkMVpycmd6QUNIY2QwQlRkCnZYL290Y2NRZDhGOFRUSWdjNHQrREg1S1hLTWlCSDRKR2EyK1ZTWHlhQlFxK2tKdWN0d0ZVSmQ2VDlwckRSUjMKd1JYUFdYMkRsZEV5RFk4YnRTNklVNFFma0htbzNhbnF6R2IvOVFJREFRQUJBb0lCQVFDWFdxSktGSlJpSURRTQppOG9IVWNnV2ZVL1dNUHpUT1hPbFR1M2wxWXl2SVJYZExPRzhkdFU2S1hKWWhUdlZIdVNLSVJuSXlhZUhiWjZjCjdQdGRneithNXd2UUwvajNuelFiTUpVanplamo0dnRFbkNJbGY2Ylo0cWNRWlYvSHhYYVVIb0NCdUV3S2J5cnIKNWZRMDlaR3o3VE1FMVJxaXNmYjduZG1QWVdPb29MNDBRb1RDSjkveXIxeEFqZmhXQ05ZQ1lZRWltSkRRRGpqWgpBV1NWZmkxc0dlaDB2QUEyZFVHZDNIUDRVWDAvYWdpM3dpMFVuVE90SnRyQzdFVFJkb2hLTEYvUHNEWWNQNVpCCnZqemhCQmdRNDhQZkpXTGpKaWtSci85UUh4aGNmY2JweWVQRHJOak1UQjFkUGQxQnk3TEFaRG8za2wrZG0vU0cKZG83SmFFY0JBb0dCQU5wSENadWxnck43L2ptMzE1Rk5wVGdwM3RRM29ja0Q5dUtjY2Nhczc3b1B0cHp2akR2QgpzbWxxNlZ6R053UFZTWDhKOEQ5MmxGOWFLeGQ5VEpxZmI5SmhyZm9WNWxWemJ5K3JKc0NmZlZ0b0Vacm1PQnU5ClVua0h2TFhMS1lkK2hrVzRDRkFMRGJRZTVJWGl3TEtPN1ovY1V4V1QxYjJ1Z0tOekQyNW1WbEJoQW9HQkFNZXcKbXJhK3JWOWM5K2hYdFBwZEhKcHRhQ2NZV2lvQzJRZGF6OW1LbkpKK0NIUllIOUdXTm10cnNXWDJCWnVrczhzbAo0OFhvMzRlNi9RcTI2WmdJU0loZW1uNlgzTUQrekMzQTI4SVVBbno0aWxkeEZldzlhb1dqWmkwNEhZWGNHaysyClZTTUFtVzVJcm5yNU5YT1I5aGFUci83SkZRL1htcTBVMlhEeWkyZ1ZBb0dBV2wybWdLV1k0cTJtcGthU0hEbkUKK09kOHRPY0RON0ZJZUxERCtiaUcxc1RDbVY0aTlHcFFib3d3YUpRM0dvTW1sazJMQlBzV21oTStXODhuODZ1bQpJN2NFeTlCZE4ycyswTUZPbmRocGtYb1lMOFMzM2VRWFRMd0RTRS8vdFhTUUtqVHlYQkQzYjJhS3ZWTU82OTE0ClN3SnY4ekxzL2taTVExN1RPS1Z0Zm9FQ2dZRUF2M3YrSDliZ2NWMjQ2N2VPOTdWcHhEdTljQi9OOWhNZEFneDIKMjJncms5My9SWEZyc1pLVlJKVFVXNjE2MnpFb3Axa0IvYm04LzI2elR4N3ZDTGFJdHh2Z2tod1Z0NHVkUnhKMApxTHAvV0U4TWVhVWJISm9ZRjJZRWlNQVNyMVhNZFR1bWtCWDNDdVh2U2tUR21MZ1NmcnZJUEUyZVFMN0N0ODRTClpGaHdqYkVDZ1lFQXhYWmNJdEZnQktvN2NzSWRHNXpFT0xzWEYxYmo4dXhiTEJpeEdYWW05S3Zkc2FIZkY3eUEKTGM3V3N6MDd1ZVlUWjFIU0pLMWw3anlEN05aZmpTc0NKZ1hLU1N3UG9vNDA5MTlIKzlITXRUcXVvaVN1ODdwWgp6ZjBYYmQ2Z0txby9LS2hkMTFnb3llTEV6SEsyTy9NQk03YmRoSlhBRVlDMmZ3dmtZaHUwdUNVPQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=

- Để chuyển đổi giữa các content để sử dụng các môi trường khác nhau:
#kubectl config use-context [name-context]

- Để thay đổi file config mặc định
#kubectl config view --kubeconfig=/home/kiendt/my-custom-config

- Mỗi cluster có thể được cấu hình với nhiều namespace bên trong nó. Có thể configure a context để switch qua 1 namespace cụ thể
VD:
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: DATA+OMITTED
    /// 
    ở các field certificate cũng có thể sử dụng:

    certificate-authority: /home/kiendt/ca.crt

    để chỉ định trực tiếp đường dẫn của cert
    ///
    server: https://172.16.1.10:6443
  name: kubernetes
contexts:
- context:
    cluster: kubernetes
    namespace: default
    user: kubernetes-admin
    namespace: kiendt               ///Chỉ định namespace cụ thể cho context này thì khi switch sẽ mặc định sử dụng namespace này
  name: kubernetes-admin@kubernetes
current-context: kubernetes-admin@kubernetes
kind: Config
preferences: {}
users:
- name: kubernetes-admin
  user:
    client-certificate-data: REDACTED
    client-key-data: REDACTED